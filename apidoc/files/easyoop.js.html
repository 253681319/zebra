<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>easyoop.js - Zebra API</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.8.0pr2/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <script src="http://yui.yahooapis.com/combo?3.8.0pr2/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            <h1>Zebra API: easyoop.js</a></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 07/2013</em>
        </div>
    </div>
    <div class="yui3-g">

        <div id="sidebar" class="yui3-u">
            <div id="modules" class="sidebox">
    <div class="hd">
        <h2 class="no-toc">Packages</h2>
    </div>
    <div class="bd">
        <ul>
            
                <li><a href="../modules/data.html">data</a>
                
                </li>
            
                <li><a href="../modules/io.html">io</a>
                
                </li>
            
                <li><a href="../modules/layout.html">layout</a>
                
                </li>
            
                <li><a href="../modules/ui.html">ui</a>
                
                </li>
            
                <li><a href="../modules/ui.designer.html">ui.designer</a>
                
                </li>
            
                <li><a href="../modules/ui.grid.html">ui.grid</a>
                
                </li>
            
                <li><a href="../modules/ui.tree.html">ui.tree</a>
                
                </li>
            
                <li><a href="../modules/util.html">util</a>
                
                </li>
            
                <li><a href="../modules/zebra.html">zebra</a>
                
                </li>
            
        </ul>
    </div>
</div>

<div id="classes" class="sidebox">
    <div class="hd">
        <h2 class="no-toc">Classes and interfaces</h2>
    </div>
    <div class="bd">
        <ul>
            
                <li><a href="../classes/zebra.Class().html">zebra.Class()</a></li>
            
                <li><a href="../classes/zebra.data.Item.html">zebra.data.Item</a></li>
            
                <li><a href="../classes/zebra.data.ListModel.html">zebra.data.ListModel</a></li>
            
                <li><a href="../classes/zebra.data.Matrix.html">zebra.data.Matrix</a></li>
            
                <li><a href="../classes/zebra.data.SingleLineTxt.html">zebra.data.SingleLineTxt</a></li>
            
                <li><a href="../classes/zebra.data.Text.html">zebra.data.Text</a></li>
            
                <li><a href="../classes/zebra.data.TextModel.html">zebra.data.TextModel</a></li>
            
                <li><a href="../classes/zebra.data.TreeModel.html">zebra.data.TreeModel</a></li>
            
                <li><a href="../classes/zebra.Dummy.html">zebra.Dummy</a></li>
            
                <li><a href="../classes/zebra.forName().html">zebra.forName()</a></li>
            
                <li><a href="../classes/zebra.instanceOf().html">zebra.instanceOf()</a></li>
            
                <li><a href="../classes/zebra.Interface().html">zebra.Interface()</a></li>
            
                <li><a href="../classes/zebra.io.b64decode().html">zebra.io.b64decode()</a></li>
            
                <li><a href="../classes/zebra.io.b64encode().html">zebra.io.b64encode()</a></li>
            
                <li><a href="../classes/zebra.io.GET().html">zebra.io.GET()</a></li>
            
                <li><a href="../classes/zebra.io.HTTP.html">zebra.io.HTTP</a></li>
            
                <li><a href="../classes/zebra.io.ID().html">zebra.io.ID()</a></li>
            
                <li><a href="../classes/zebra.io.JRPC.html">zebra.io.JRPC</a></li>
            
                <li><a href="../classes/zebra.io.JRPC.invoke().html">zebra.io.JRPC.invoke()</a></li>
            
                <li><a href="../classes/zebra.io.POST().html">zebra.io.POST()</a></li>
            
                <li><a href="../classes/zebra.io.QS.html">zebra.io.QS</a></li>
            
                <li><a href="../classes/zebra.io.Service.html">zebra.io.Service</a></li>
            
                <li><a href="../classes/zebra.io.XRPC.html">zebra.io.XRPC</a></li>
            
                <li><a href="../classes/zebra.io.XRPC.invoke().html">zebra.io.XRPC.invoke()</a></li>
            
                <li><a href="../classes/zebra.layout.BorderLayout.html">zebra.layout.BorderLayout</a></li>
            
                <li><a href="../classes/zebra.layout.Constraints.html">zebra.layout.Constraints</a></li>
            
                <li><a href="../classes/zebra.layout.FlowLayout.html">zebra.layout.FlowLayout</a></li>
            
                <li><a href="../classes/zebra.layout.getAbsLocation().html">zebra.layout.getAbsLocation()</a></li>
            
                <li><a href="../classes/zebra.layout.getDirectAt().html">zebra.layout.getDirectAt()</a></li>
            
                <li><a href="../classes/zebra.layout.getDirectChild().html">zebra.layout.getDirectChild()</a></li>
            
                <li><a href="../classes/zebra.layout.getTopParent().html">zebra.layout.getTopParent()</a></li>
            
                <li><a href="../classes/zebra.layout.GridLayout.html">zebra.layout.GridLayout</a></li>
            
                <li><a href="../classes/zebra.layout.Layout.html">zebra.layout.Layout</a></li>
            
                <li><a href="../classes/zebra.layout.Layoutable.html">zebra.layout.Layoutable</a></li>
            
                <li><a href="../classes/zebra.layout.ListLayout.html">zebra.layout.ListLayout</a></li>
            
                <li><a href="../classes/zebra.layout.PercentLayout.html">zebra.layout.PercentLayout</a></li>
            
                <li><a href="../classes/zebra.layout.RasterLayout.html">zebra.layout.RasterLayout</a></li>
            
                <li><a href="../classes/zebra.layout.StackLayout.html">zebra.layout.StackLayout</a></li>
            
                <li><a href="../classes/zebra.ready().html">zebra.ready()</a></li>
            
                <li><a href="../classes/zebra.ui.BaseLayer.html">zebra.ui.BaseLayer</a></li>
            
                <li><a href="../classes/zebra.ui.BaseList.html">zebra.ui.BaseList</a></li>
            
                <li><a href="../classes/zebra.ui.BoldLabel.html">zebra.ui.BoldLabel</a></li>
            
                <li><a href="../classes/zebra.ui.Border.html">zebra.ui.Border</a></li>
            
                <li><a href="../classes/zebra.ui.BorderPan.html">zebra.ui.BorderPan</a></li>
            
                <li><a href="../classes/zebra.ui.Button.html">zebra.ui.Button</a></li>
            
                <li><a href="../classes/zebra.ui.Checkbox.html">zebra.ui.Checkbox</a></li>
            
                <li><a href="../classes/zebra.ui.Checkbox.Box.html">zebra.ui.Checkbox.Box</a></li>
            
                <li><a href="../classes/zebra.ui.ChildrenListener.html">zebra.ui.ChildrenListener</a></li>
            
                <li><a href="../classes/zebra.ui.Combo.html">zebra.ui.Combo</a></li>
            
                <li><a href="../classes/zebra.ui.Combo.ContentPan.html">zebra.ui.Combo.ContentPan</a></li>
            
                <li><a href="../classes/zebra.ui.Combo.EditableContentPan.html">zebra.ui.Combo.EditableContentPan</a></li>
            
                <li><a href="../classes/zebra.ui.Combo.ReadonlyContentPan.html">zebra.ui.Combo.ReadonlyContentPan</a></li>
            
                <li><a href="../classes/zebra.ui.ComboArrowView.html">zebra.ui.ComboArrowView</a></li>
            
                <li><a href="../classes/zebra.ui.CommandManager.html">zebra.ui.CommandManager</a></li>
            
                <li><a href="../classes/zebra.ui.CompList.html">zebra.ui.CompList</a></li>
            
                <li><a href="../classes/zebra.ui.ComponentListener.html">zebra.ui.ComponentListener</a></li>
            
                <li><a href="../classes/zebra.ui.Composite.html">zebra.ui.Composite</a></li>
            
                <li><a href="../classes/zebra.ui.CompositeView.html">zebra.ui.CompositeView</a></li>
            
                <li><a href="../classes/zebra.ui.CompRender.html">zebra.ui.CompRender</a></li>
            
                <li><a href="../classes/zebra.ui.CopyCutPaste.html">zebra.ui.CopyCutPaste</a></li>
            
                <li><a href="../classes/zebra.ui.Cursorable.html">zebra.ui.Cursorable</a></li>
            
                <li><a href="../classes/zebra.ui.CursorManager.html">zebra.ui.CursorManager</a></li>
            
                <li><a href="../classes/zebra.ui.designer.ShaperPan.html">zebra.ui.designer.ShaperPan</a></li>
            
                <li><a href="../classes/zebra.ui.Dotted.html">zebra.ui.Dotted</a></li>
            
                <li><a href="../classes/zebra.ui.Etched.html">zebra.ui.Etched</a></li>
            
                <li><a href="../classes/zebra.ui.EventManager.html">zebra.ui.EventManager</a></li>
            
                <li><a href="../classes/zebra.ui.findCanvas().html">zebra.ui.findCanvas()</a></li>
            
                <li><a href="../classes/zebra.ui.FocusListener.html">zebra.ui.FocusListener</a></li>
            
                <li><a href="../classes/zebra.ui.FocusManager.html">zebra.ui.FocusManager</a></li>
            
                <li><a href="../classes/zebra.ui.Font.html">zebra.ui.Font</a></li>
            
                <li><a href="../classes/zebra.ui.Gradient.html">zebra.ui.Gradient</a></li>
            
                <li><a href="../classes/zebra.ui.grid.DefEditors.html">zebra.ui.grid.DefEditors</a></li>
            
                <li><a href="../classes/zebra.ui.grid.Grid.html">zebra.ui.grid.Grid</a></li>
            
                <li><a href="../classes/zebra.ui.grid.GridCaption.html">zebra.ui.grid.GridCaption</a></li>
            
                <li><a href="../classes/zebra.ui.grid.GridStretchPan.html">zebra.ui.grid.GridStretchPan</a></li>
            
                <li><a href="../classes/zebra.ui.grid.Metrics.html">zebra.ui.grid.Metrics</a></li>
            
                <li><a href="../classes/zebra.ui.Group.html">zebra.ui.Group</a></li>
            
                <li><a href="../classes/zebra.ui.HtmlElement.html">zebra.ui.HtmlElement</a></li>
            
                <li><a href="../classes/zebra.ui.HtmlTextArea.html">zebra.ui.HtmlTextArea</a></li>
            
                <li><a href="../classes/zebra.ui.HtmlTextField.html">zebra.ui.HtmlTextField</a></li>
            
                <li><a href="../classes/zebra.ui.HtmlTextInput.html">zebra.ui.HtmlTextInput</a></li>
            
                <li><a href="../classes/zebra.ui.ImageLabel.html">zebra.ui.ImageLabel</a></li>
            
                <li><a href="../classes/zebra.ui.ImagePan.html">zebra.ui.ImagePan</a></li>
            
                <li><a href="../classes/zebra.ui.InputEvent.html">zebra.ui.InputEvent</a></li>
            
                <li><a href="../classes/zebra.ui.KeyEvent.html">zebra.ui.KeyEvent</a></li>
            
                <li><a href="../classes/zebra.ui.KeyListener.html">zebra.ui.KeyListener</a></li>
            
                <li><a href="../classes/zebra.ui.Label.html">zebra.ui.Label</a></li>
            
                <li><a href="../classes/zebra.ui.List.html">zebra.ui.List</a></li>
            
                <li><a href="../classes/zebra.ui.List.ViewProvider.html">zebra.ui.List.ViewProvider</a></li>
            
                <li><a href="../classes/zebra.ui.loadImage().html">zebra.ui.loadImage()</a></li>
            
                <li><a href="../classes/zebra.ui.Manager.html">zebra.ui.Manager</a></li>
            
                <li><a href="../classes/zebra.ui.Menu.html">zebra.ui.Menu</a></li>
            
                <li><a href="../classes/zebra.ui.Menunbar.html">zebra.ui.Menunbar</a></li>
            
                <li><a href="../classes/zebra.ui.MLabel.html">zebra.ui.MLabel</a></li>
            
                <li><a href="../classes/zebra.ui.MouseEvent.html">zebra.ui.MouseEvent</a></li>
            
                <li><a href="../classes/zebra.ui.MouseListener.html">zebra.ui.MouseListener</a></li>
            
                <li><a href="../classes/zebra.ui.MouseWheelSupport.html">zebra.ui.MouseWheelSupport</a></li>
            
                <li><a href="../classes/zebra.ui.PaintManager.html">zebra.ui.PaintManager</a></li>
            
                <li><a href="../classes/zebra.ui.PaintManImpl.html">zebra.ui.PaintManImpl</a></li>
            
                <li><a href="../classes/zebra.ui.Panel.html">zebra.ui.Panel</a></li>
            
                <li><a href="../classes/zebra.ui.PasswordText.html">zebra.ui.PasswordText</a></li>
            
                <li><a href="../classes/zebra.ui.Pattern.html">zebra.ui.Pattern</a></li>
            
                <li><a href="../classes/zebra.ui.Picture.html">zebra.ui.Picture</a></li>
            
                <li><a href="../classes/zebra.ui.PopupInfo.html">zebra.ui.PopupInfo</a></li>
            
                <li><a href="../classes/zebra.ui.PopupLayer.html">zebra.ui.PopupLayer</a></li>
            
                <li><a href="../classes/zebra.ui.PopupManager.html">zebra.ui.PopupManager</a></li>
            
                <li><a href="../classes/zebra.ui.Progress.html">zebra.ui.Progress</a></li>
            
                <li><a href="../classes/zebra.ui.Radial.html">zebra.ui.Radial</a></li>
            
                <li><a href="../classes/zebra.ui.Radiobox.html">zebra.ui.Radiobox</a></li>
            
                <li><a href="../classes/zebra.ui.RadioView.html">zebra.ui.RadioView</a></li>
            
                <li><a href="../classes/zebra.ui.Raised.html">zebra.ui.Raised</a></li>
            
                <li><a href="../classes/zebra.ui.Render.html">zebra.ui.Render</a></li>
            
                <li><a href="../classes/zebra.ui.RootLayer.html">zebra.ui.RootLayer</a></li>
            
                <li><a href="../classes/zebra.ui.RoundBorder.html">zebra.ui.RoundBorder</a></li>
            
                <li><a href="../classes/zebra.ui.Scroll.html">zebra.ui.Scroll</a></li>
            
                <li><a href="../classes/zebra.ui.ScrollManager.html">zebra.ui.ScrollManager</a></li>
            
                <li><a href="../classes/zebra.ui.ScrollPan.html">zebra.ui.ScrollPan</a></li>
            
                <li><a href="../classes/zebra.ui.Slider.html">zebra.ui.Slider</a></li>
            
                <li><a href="../classes/zebra.ui.SplitPan.html">zebra.ui.SplitPan</a></li>
            
                <li><a href="../classes/zebra.ui.StatePan.html">zebra.ui.StatePan</a></li>
            
                <li><a href="../classes/zebra.ui.Sunken.html">zebra.ui.Sunken</a></li>
            
                <li><a href="../classes/zebra.ui.SwitchManager.html">zebra.ui.SwitchManager</a></li>
            
                <li><a href="../classes/zebra.ui.Tabs.html">zebra.ui.Tabs</a></li>
            
                <li><a href="../classes/zebra.ui.TextArea.html">zebra.ui.TextArea</a></li>
            
                <li><a href="../classes/zebra.ui.TextField.html">zebra.ui.TextField</a></li>
            
                <li><a href="../classes/zebra.ui.TextRender.html">zebra.ui.TextRender</a></li>
            
                <li><a href="../classes/zebra.ui.Toolbar.html">zebra.ui.Toolbar</a></li>
            
                <li><a href="../classes/zebra.ui.TooltipInfo.html">zebra.ui.TooltipInfo</a></li>
            
                <li><a href="../classes/zebra.ui.TooltipManager.html">zebra.ui.TooltipManager</a></li>
            
                <li><a href="../classes/zebra.ui.tree.DefEditors.html">zebra.ui.tree.DefEditors</a></li>
            
                <li><a href="../classes/zebra.ui.tree.DefViews.html">zebra.ui.tree.DefViews</a></li>
            
                <li><a href="../classes/zebra.ui.tree.Tree.html">zebra.ui.tree.Tree</a></li>
            
                <li><a href="../classes/zebra.ui.View.html">zebra.ui.View</a></li>
            
                <li><a href="../classes/zebra.ui.ViewPan.html">zebra.ui.ViewPan</a></li>
            
                <li><a href="../classes/zebra.ui.ViewSet.html">zebra.ui.ViewSet</a></li>
            
                <li><a href="../classes/zebra.ui.Window.html">zebra.ui.Window</a></li>
            
                <li><a href="../classes/zebra.ui.WinLayer.html">zebra.ui.WinLayer</a></li>
            
                <li><a href="../classes/zebra.ui.WinListener.html">zebra.ui.WinListener</a></li>
            
                <li><a href="../classes/zebra.ui.zCanvas.html">zebra.ui.zCanvas</a></li>
            
                <li><a href="../classes/zebra.URL.html">zebra.URL</a></li>
            
                <li><a href="../classes/zebra.util.Bag.html">zebra.util.Bag</a></li>
            
                <li><a href="../classes/zebra.util.findInTree().html">zebra.util.findInTree()</a></li>
            
                <li><a href="../classes/zebra.util.Listeners.html">zebra.util.Listeners</a></li>
            
                <li><a href="../classes/zebra.util.newInstance().html">zebra.util.newInstance()</a></li>
            
                <li><a href="../classes/zebra.util.Position.html">zebra.util.Position</a></li>
            
                <li><a href="../classes/zebra.util.Position.Metric.html">zebra.util.Position.Metric</a></li>
            
                <li><a href="../classes/zebra.util.rgb.html">zebra.util.rgb</a></li>
            
        </ul>
    </div>
</div>












        </div>

        <div id="main" class="yui3-u">
            <div class="content"><h4>easyoop.js</h4>

<pre class="code prettyprint linenums">
(function() {

/**
 * This is the core module that provides powerful easy OOP concept, packaging and number of utility methods.
 * The module has no any dependency from others zebra modules and can be used independently.  
 * @module zebra
 * @namespace zebra
 * @main
 */


//  Faster operation analogues:
//  Math.floor(f)  =&gt; (a)
//  Math.round(f)  =&gt;  (f + 0.5) | 0
//
function isString(o)  { return typeof o !== &quot;undefined&quot; &amp;&amp; o !== null &amp;&amp; (typeof o === &quot;string&quot; || o.constructor === String); }
function isNumber(o)  { return typeof o !== &quot;undefined&quot; &amp;&amp; o !== null &amp;&amp; (typeof o === &quot;number&quot; || o.constructor === Number); }
function isBoolean(o) { return typeof o !== &quot;undefined&quot; &amp;&amp; o !== null &amp;&amp; (typeof o === &quot;boolean&quot; || o.constructor === Boolean); }

if (!String.prototype.trim) { String.prototype.trim = function() { return this.replace(/^\s+|\s+$/g,&#x27;&#x27;);  }; }

if (!Array.prototype.indexOf) {
    Array.prototype.indexOf = function(searchElement) {
        if (this == null) throw new TypeError();
        var t = Object(this), len = t.length &gt;&gt;&gt; 0;
        if (len === 0) return -1;

        var n = 0;
        if (arguments.length &gt; 0) {
            n = Number(arguments[1]);
            if (n != n) n = 0;
            else if (n !== 0 &amp;&amp; n != Infinity &amp;&amp; n != -Infinity) {
                n = (n &gt; 0 || -1) * ~~Math.abs(n);
            }
        }
        if (n &gt;= len) return -1;
        var k = n &gt;= 0 ? n : Math.max(len - Math.abs(n), 0);
        for (; k &lt; len; k++) if (k in t &amp;&amp; t[k] === searchElement) return k;
        return -1;
    };
}

if (!Array.isArray) Array.isArray = function(a) { return Object.prototype.toString.call(a) == &#x27;[object Array]&#x27;; };

var $$$ = 0, namespaces = {}, namespace = function(nsname, dontCreate) {
    if (isString(nsname) === false) {
        throw new Error(&quot;Wrong nsname argument&quot;);
    }

    if (namespaces.hasOwnProperty(nsname)) {
        return namespaces[nsname];
    }

    if (dontCreate === true) {
        throw new Error(&quot;Namespace &#x27;&quot; + nsname + &quot;&#x27; doesn&#x27;t exist&quot;);
    }

    function Package() {
        this.$url = null;
        if (zebra.isInBrowser) {
            var s  = document.getElementsByTagName(&#x27;script&#x27;),
                ss = s[s.length - 1].getAttribute(&#x27;src&#x27;),
                i  = ss == null ? -1 : ss.lastIndexOf(&quot;/&quot;);

            this.$url = (i &gt; 0) ? new zebra.URL(ss.substring(0, i + 1))
                                : new zebra.URL(document.location.toString()).getParentURL() ;
        }
    }

    if (isString(nsname) === false) {
        throw new Error(&#x27;invalid namespace id&#x27;);
    }

    if (namespaces.hasOwnProperty(nsname)) {
        throw new Error(&quot;Namespace &#x27;&quot; + nsname + &quot;&#x27; already exists&quot;);
    }

    var f = function(name) {
        if (arguments.length === 0) return f.$env;

        if (typeof name === &#x27;function&#x27;) {
            for(var k in f) if (f[k] instanceof Package) name(k, f[k]);
            return null;
        }

        var b = Array.isArray(name);
        if (isString(name) === false &amp;&amp; b === false) {
            for(var k in name) if (name.hasOwnProperty(k)) f.$env[k] = name[k];
            return;
        }

        if (b) {
           for(var i = 0; i &lt; name.length; i++) f(name[i]);
           return null;
        }

        if (f[name] instanceof Package) return f[name];

        var names = name.split(&#x27;.&#x27;), target = f;
        for(var i = 0, k = names[0]; i &lt; names.length; i++, k = [k, &#x27;.&#x27;, names[i]].join(&#x27;&#x27;)) {
            var n = names[i], p = target[n];
            if (typeof p === &quot;undefined&quot;) {
                p = new Package();
                target[n] = p;
                f[k] = p;
            }
            else {
                if ((p instanceof Package) === false) {
                    throw new Error(&quot;Package &#x27;&quot; + name +  &quot;&#x27; conflicts with variable &#x27;&quot; + n + &quot;&#x27;&quot;);
                }
            }

            target = p;
        }
        return target;
    };

    f.Import = function() {
        var ns = [&quot;=&quot;, nsname, &quot;.&quot;].join(&#x27;&#x27;), code = [], packages = arguments.length === 0 ? null : Array.prototype.slice.call(arguments, 0);
        f(function(n, p) {
            if (packages == null || packages.indexOf(n) &gt;= 0) {
                for (var k in p) {
                    if (k[0] != &#x27;$&#x27; &amp;&amp; k[0] != &#x27;_&#x27; &amp;&amp; (p[k] instanceof Package) === false &amp;&amp; p.hasOwnProperty(k)) {
                        code.push([k, ns, n, &quot;.&quot;, k].join(&#x27;&#x27;));
                    }
                }
                if (packages != null) packages.splice(packages.indexOf(n), 1);
            }
        });

        if (packages != null &amp;&amp; packages.length !== 0) {
            throw new Error(&quot;Unknown package(s): &quot; + packages.join(&quot;,&quot;));
        }

        return code.length &gt; 0 ? [ &quot;var &quot;, code.join(&quot;,&quot;), &quot;;&quot;].join(&#x27;&#x27;) : null;
    };

    f.$env = {};
    namespaces[nsname] = f;
    return f;
};


zebra = namespace(&#x27;zebra&#x27;);
var pkg = zebra,
    FN = pkg.$FN = (typeof namespace.name === &quot;undefined&quot;) ? (function(f) { var mt = f.toString().match(/^function ([^(]+)/); return (mt == null) ? &#x27;&#x27; : mt[1]; })
                                                           : (function(f) { return f.name; });

pkg.namespaces = namespaces;
pkg.namespace  = namespace;
pkg.$global    = this;
pkg.isString   = isString;
pkg.isNumber   = isNumber;
pkg.isBoolean  = isBoolean;
pkg.version = &quot;1.2.0&quot;;
pkg.$caller = null;


function mnf(name, params) {
    var cln = this.getClazz &amp;&amp; this.getClazz().$name ? this.getClazz().$name + &quot;.&quot; : &quot;&quot;;
    throw new ReferenceError(&quot;Method &#x27;&quot; + cln + (name === &#x27;&#x27; ? &quot;constructor&quot; : name) + &quot;(&quot; + params + &quot;)&quot; + &quot;&#x27; not found&quot;);
}

function $toString() { return this._hash_; }
function $equals(o)  { return this == o;   }

// return function that is meta class
//  pt - parent template function
//  tf - template function
function make_template(pt, tf, p) {
    tf._hash_ = [&quot;$zebra_&quot;, $$$++].join(&#x27;&#x27;);
    tf.toString = $toString;
    if (pt != null) tf.prototype.getClazz = function() { return tf; };
    tf.getClazz = function() { return pt; };
    tf.prototype.toString = $toString;
    tf.prototype.equals   = $equals;
    tf.prototype.constructor = tf;

    if (p &amp;&amp; p.length &gt; 0) {
        tf.parents = {};
        for(var i=0; i &lt; p.length; i++) {
            var l = p[i];
            if (typeof l === &#x27;undefined&#x27;) throw new ReferenceError(&quot;Unknown parent[&quot;+i+&quot;]&quot;);
            tf.parents[l] = true;
            if (l.parents) {
                var pp = l.parents;
                for(var k in pp) {
                    if (pp.hasOwnProperty(k)) tf.parents[k] = true;
                }
            }
        }
    }
    return tf;
}

pkg.getPropertySetter = function(obj, name) {
    var pi = obj.constructor.$propertyInfo;
    if (pi != null) {
        if (typeof pi[name] === &quot;undefined&quot;) {
            var m = obj[ [&quot;set&quot;, name[0].toUpperCase(), name.substring(1)].join(&#x27;&#x27;) ];
            pi[name] = (typeof m  === &quot;function&quot;) ? m : null;
        }
        return pi[name];
    }

    var m = obj[[&quot;set&quot;, name[0].toUpperCase(), name.substring(1)].join(&#x27;&#x27;)];
    return (typeof m  === &quot;function&quot;) ? m : null;
};

/**
 * Interface is a special class that is used to &quot;pitch&quot; a class with a some marker.
 * It is not supposed an interface directly rules which method the class has to implement.
 
        // declare &quot;I&quot; interface
        var I = zebra.Interface();

        // declare &quot;A&quot; class that implements &quot;I&quot; interface
        var A = zebra.Class(I, [ function m() {} ]);
    
        // instantiate &quot;A&quot; class
        var a = new A();
        zebra.instanceOf(a, I);  // true 
        zebra.instanceOf(a, A);  // true 


 * @return {Function} an interface
 * @method Interface
 * @for  Interface()
 */
pkg.Interface = make_template(null, function() {
    var $Interface = make_template(pkg.Interface, function() {
        if (arguments.length &gt; 0) return new (pkg.Class($Interface, arguments[0]))();
    }, arguments);
    return $Interface;
});
/**
 * @for  Interface()
 */

pkg.$Extended = pkg.Interface();

function ProxyMethod(name, f) {
    if (isString(name) === false) {
        throw new TypeError(&#x27;Method name has not been defined&#x27;);
    }

    var a = null;
    if (arguments.length == 1) {
        a = function() {
            var nm = a.methods[arguments.length];
            if (nm) {
                var cm = pkg.$caller;
                pkg.$caller = nm;
                try { return nm.apply(this, arguments); }
                catch(e) { throw e; }
                finally { pkg.$caller = cm; }
            }
            mnf.call(this, a.methodName, arguments.length);
        };
        a.methods = {};
    }
    else {
        a = function() {
            var cm = pkg.$caller;
            pkg.$caller = f;
            try { return f.apply(this, arguments); }
            catch(e) { throw e; }
            finally { pkg.$caller = cm; }
        };
        a.f = f;
    }

    a.$clone$ = function() {
        if (a.methodName === &#x27;&#x27;) return null;
        if (a.f) return ProxyMethod(a.methodName, a.f);
        var m = ProxyMethod(a.methodName);
        for(var k in a.methods) m.methods[k] = a.methods[k];
        return m;
    };

    a.methodName = name;
    return a;
}

/**
 * Class declaration method. Zebra easy OOP concept supports:
 
    - **Single class inheritance.** Any class can extend an another zebra class

            // declare class &quot;A&quot; that with one method &quot;a&quot;   
            var A = zebra.Class([
                function a() { ... }
            ]);
        
            // declare class &quot;B&quot; that inherits class &quot;A&quot;
            var B = zebra.Class(A, []);

            // instantiate class &quot;B&quot; and call method &quot;a&quot;
            var b = new B();
            b.a();

    - **Class method overriding.** Override a parent class method implementation

            // declare class &quot;A&quot; that with one method &quot;a&quot;   
            var A = zebra.Class([
                function a() { ... }
            ]);
        
            // declare class &quot;B&quot; that inherits class &quot;A&quot;
            // and overrides method a with an own implementation
            var B = zebra.Class(A, [
                function a() { ... }
            ]);

    - **Class method overloading.** You can declare methods with the same names but 
    different parameter list. The methods are considered as different method

            // declare class &quot;A&quot; that with one method &quot;a&quot;   
            var A = zebra.Class([
                function a() { ... }
            ]);
        
            // declare class &quot;B&quot; that inherits class &quot;A&quot;
            // and overloads method &quot;a&quot; with another number of
            // parameters 
            var B = zebra.Class(A, [
                function a(param1) { ... }
            ]);

            // instantiate class B and call two different 
            // methods &quot;a()&quot; and &quot;a(param1)&quot;
            var b = new B();
            b.a();      // call method defined in &quot;A&quot; class 
            b.a(100);   // call overloaded method defined in &quot;B&quot; class


    - **Constructors.** Constructor is a method with empty name

            // declare class &quot;A&quot; that with one constructor
            var A = zebra.Class([
                function () { this.variable = 100; }
            ]);

            // instantiate &quot;A&quot;
            var a = new A();
            a.variable // variable is 100 

    - **Static methods and variables declaration.** Static fields and methods can be setup by declaring
      special &quot;$clazz&quot; method whose context is set to declared class

            var A = zebra.Class([
                // special method where static stuff has to be declared
                function $clazz() {
                    // declare static field
                    this.staticVar = 100;
                    // declare static method
                    this.staticMethod = function() {};
                }
            ]); 

            // access static field an method
            A.staticVar      // 100
            A.staticMethod() // call static method 

    - **Access to super class context.** You can call method declared in a parent class 

            // declare &quot;A&quot; class with one class method &quot;a(p1,p2)&quot;
            var A = zebra.Class([
                function a(p1, p2) { ... }  
            ]); 
        
            // declare &quot;B&quot; class that inherits &quot;A&quot; class and overrides &quot;a(p1,p2)&quot; method
            var B = zebra.Class(A, [
                function a(p1, p2) { 
                    // call &quot;a(p1,p2)&quot; method implemented with &quot;A&quot; class
                    this.$super(p1,p2); 
                }  
            ]); 

 *
 *  One of the powerful feature of zebra easy OOP concept is possibility to instantiate 
 *  anonymous classes and interfaces. Anonymous class is an instance of an existing 
 *  class that can override the original class methods with own implementations, implements
 *  own list of interfaces. In other words the class instance customizes class definition
 *  for a particular instance of the class;  

            // declare &quot;A&quot; class
            var A = zebra.Class([
                function a() { return 1; }
            ]);

            // instantiate anonymous class that add an own implementation of &quot;a&quot; method
            var a = new A([
                function a() { return 2; }
            ]);
            a.a() // return 2

 * @param {zebra.Class} [inheritedClass] an optional parent class to be inherited 
 * @param {zebra.Interface} [inheritedClass]* an optional interface to be extended
 * @param {Array} methods list of declared class methods. Can be empty.
 * @return {Function} a class definition
 * @for Class()
 * @method Class
 */
pkg.Class = make_template(null, function() {
    if (arguments.length === 0) throw new Error(&quot;No class definition was found&quot;);

    var df = arguments[arguments.length - 1], 
        $parent = null,
        args = Array.prototype.slice.call(arguments, 0, arguments.length-1);

    if (args.length &gt; 0 &amp;&amp; (args[0] == null || args[0].getClazz() == pkg.Class)) {
        $parent = args[0];
    }

    var $template = make_template(pkg.Class, function() {
        this._hash_ = [&quot;$zObj_&quot;, $$$++].join(&#x27;&#x27;);

        if (arguments.length &gt; 0) {
            var a = arguments[arguments.length - 1];

            // anonymous is customized class instance if last arguments is array of functions
            if (Array.isArray(a) === true &amp;&amp; typeof a[0] === &#x27;function&#x27;) {
                a = a[0];
                var args = [ $template ], k = arguments.length - 2;
                for(; k &gt;= 0 &amp;&amp; pkg.instanceOf(arguments[k], pkg.Interface); k--) args.push(arguments[k]);
                args.push(arguments[arguments.length - 1]);
                var cl = pkg.Class.apply(null, args), f = function() {};
                cl.$name = $template.$name;
                f.prototype = cl.prototype;
                var o = new f();
                cl.apply(o, Array.prototype.slice.call(arguments, 0, k + 1));
                o.constructor = cl;
                return o;
            }
        }

        this[&#x27;&#x27;] &amp;&amp; this[&#x27;&#x27;].apply(this, arguments);
    }, args);

    $template.$parent = $parent;
    if ($parent != null) {
        for (var k in $parent.prototype) {
            var f = $parent.prototype[k];
            if (f &amp;&amp; f.$clone$) {
                f = f.$clone$();
                if (f == null) continue;
            }
            $template.prototype[k] = f;
        }
    }

    $template.$propertyInfo = {};

    $template.prototype.extend = function() {
        var c = this.getClazz(), l = arguments.length, f = arguments[l-1];
        if (pkg.instanceOf(this, pkg.$Extended) === false) {
            var cn = c.$name;
            c = Class(c, pkg.$Extended, []);
            c.$name = cn;
            this.getClazz = function() { return c; };
        }

        if (Array.isArray(f)) {
            for(var i=0; i &lt; f.length; i++) {
                var ff = f[i], n = FN(ff);
                if (n === &#x27;&#x27;) ff.call(this);
                else {
                    var pv = this[n];
                    if (pv) {
                        if (this.hasOwnProperty(n) === false) {
                            if (pv.$clone$) pv = pv.$clone$();
                            else {
                                var pvn = ProxyMethod(n);
                                pvn.methods[pv.length] = pv;
                                pv.boundTo = c;
                                pv.methodName = n;
                                pv = pvn;
                            }
                        }
                    }
                    else {
                        pv = ProxyMethod(n);
                    }
                    pv.methods[ff.length] = ff;
                    ff.boundTo = c;
                    ff.methodName = n;
                    // !!!
                    // Since method has been added dynamically class bean info has to be
                    // up to date. Do it below, but how !?
                    // ???

                    this[n] = pv;
                }
            }
            l--;
        }

        // add new interfaces 
        for(var i=0; i &lt; l; i++) {
            if (pkg.instanceOf(arguments[i], pkg.Interface) === false) {
                throw new Error();
            }
            c.parents[arguments[i]] = true;
        }
        return this;
    };

    $template.prototype.$super = function() {
        if (pkg.$caller) {
            var name = pkg.$caller.methodName, $s = pkg.$caller.boundTo.$parent, args = arguments;
            if (arguments.length &gt; 0 &amp;&amp; typeof arguments[0] === &#x27;function&#x27;) {
                name = arguments[0].methodName;
                args = Array.prototype.slice.call(arguments, 1);
            }

            var params = args.length;
            while ($s != null) {
                var m = $s.prototype[name];
                if (m &amp;&amp; (typeof m.methods === &quot;undefined&quot; || m.methods[params])) {
                    return m.apply(this, args);
                }
                $s = $s.$parent;
            }
            mnf.call(this, name, params);
        }
        throw new Error(&quot;$super is called outside of class context&quot;);
    };

    $template.prototype.getClazz = function() { return $template; };
    $template.prototype.$this    = function() { return pkg.$caller.boundTo.prototype[&#x27;&#x27;].apply(this, arguments);  };

    /**
     * Get declared by this class methods.
     * @param  {String} [name] a method name. The name can be used as a filter to exclude all methods
     * whose name doesn&#x27;t match the passed name  
     * @return {Array} an array of declared by the class methods
     * @method  getMethods
     */
    $template.constructor.prototype.getMethods = function(name)  {
         var m = [];
         for (var n in this.prototype) {
             var f = this.prototype[n];
             if (arguments.length &gt; 0 &amp;&amp; name != n) continue;
             if (typeof f === &#x27;function&#x27;) {
                if (f.$clone$) {
                    for (var mk in f.methods) m.push(f.methods[mk]);
                }
                else m.push(f);
             }
         }
         return m;
    };

    $template.constructor.prototype.getMethod = function(name, params) {
        var m = this.prototype[name];
        if (typeof m === &#x27;function&#x27;) {
            if (m.$clone$) {
                if (typeof params === &quot;undefined&quot;)  {
                    if (m.methods[0]) return m.methods[0];
                    for(var k in m.methods) return m.methods[k];
                    return null;
                }
                m = m.methods[params];
            }
            if (m) return m;
        }
        return null;
    };

    $template.extend = function(df) {
        if (Array.isArray(df) === false) throw new Error(&quot;Wrong class definition format &quot; + df);
        for(var i=0; i &lt; df.length; i++) {
            var f = df[i], n = FN(f);
            if (n[0] == &quot;$&quot;) {
                var ctx = n == &quot;$prototype&quot; ?  $template.prototype : (n == &quot;$clazz&quot; ? $template : null);
                if (n) {
                    f.call(ctx);
                    continue;
                }
            }

            if (f.boundTo) throw new Error(&quot;Method &#x27;&quot; + n + &quot;&#x27; is bound to other class&quot;);
            var sw = null, arity = f.length, vv = this.prototype[n];

            if (typeof vv === &#x27;undefined&#x27;) {
                // this commented code allow to speed up proxy execution a  little bit for a single method
                // sw = ProxyMethod(n, f);
                // f.boundTo    = this;
                // f.methodName = n;
                // this.prototype[n] = sw;
                // return;
                sw = ProxyMethod(n);
            }
            else {
                if (typeof vv === &#x27;function&#x27;) {
                    if (vv.$clone$) {
                        if (typeof vv.methods === &quot;undefined&quot;) {
                            sw = ProxyMethod(n);
                            sw.methods[vv.f.length] = vv.f;
                        }
                        else sw = vv;
                    }
                    else {
                        sw = ProxyMethod(n);
                        if (vv.length != arity) {
                            vv.methodName = n;
                            vv.boundTo = this;
                        }
                        sw.methods[vv.length] = vv;
                    }
                }
                else throw new Error(&quot;Method &#x27;&quot; + n + &quot;&#x27; conflicts to property&quot;);
            }

            var pv = sw.methods[arity];
            if (typeof pv !== &#x27;undefined&#x27; &amp;&amp; pv.boundTo == this) {
                throw new Error(&quot;Duplicated method &#x27;&quot; + sw.methodName + &quot;(&quot; + arity +&quot;)&#x27;&quot;);
            }

            f.boundTo    = this;
            f.methodName = n;
            sw.methods[arity] = f;
            this.prototype[n] = sw;
        }
    };

    $template.extend(df);

    // validate constructor
    if ($template.$parent &amp;&amp; $template.$parent.prototype[&#x27;&#x27;] &amp;&amp; typeof $template.prototype[&#x27;&#x27;] === &quot;undefined&quot;) {
        $template.prototype[&#x27;&#x27;] = $template.$parent.prototype[&#x27;&#x27;];
    }

    return $template;
});
/**
* @for Class()
*/

var Class = pkg.Class, $cached = {}, $busy = 1, $f = [];

function $cache(name, clazz) {
    if (($cached[name] &amp;&amp; $cached[name] != clazz) || pkg.$global[name]) throw Error(&quot;Class name conflict: &quot; + name);
    $cached[name] = clazz;
}

/**
 * Get class by the given class name
 * @param  {String} name a class name
 * @return {Function} a class. Throws exception if the class cannot be 
 * resolved by the given class name
 * @method forName
 * @for  forName()
 */
Class.forName = function(name) {
    if (pkg.$global[name]) return pkg.$global[name];
    //!!!!!! infinite cache !!!!
    if ($cached.hasOwnProperty(name) === false) $cache(name, eval(name));
    var cl = $cached[name];
    if (cl == null) throw new Error(&quot;Class &quot; + name + &quot; cannot be found&quot;);
    return cl;
};
/**
 * @for forName()
 */

/**
 * Test if the given object is instance of the specified class or interface. It is preferable 
 * to use this method instead of JavaScript &quot;instanceof&quot; operator whenever you are dealing with 
 * zebra classes and interfaces. 
 * @param  {Object} obj an object to be evaluated 
 * @return {Function} clazz a class or interface 
 * @method instanceOf
 * @for  instanceOf()
 */
pkg.instanceOf = function(obj, clazz) {
    if (clazz) {
        if (obj == null || typeof obj.getClazz === &#x27;undefined&#x27;)  return false;
        var c = obj.getClazz();
        return c != null &amp;&amp; (c === clazz || (typeof c.parents !== &#x27;undefined&#x27; &amp;&amp; c.parents.hasOwnProperty(clazz)));
    }
    throw new Error(&quot;instanceOf(): unknown class&quot;);
};
/**
 * @for instanceOf()
 */

/**
 * The method makes sure all variables, structures, elements are loaded 
 * and ready to be used. The result of the method execution is calling 
 * passed callback functions when the environment is ready. The goal of 
 * the method to provide safe place to run your code safely in proper 
 * place and at proper time.
 
        zebra.ready(function() {
            // run code here safely
            ...
        });

 * @param {Fucntion|Array} [f] a function or array of functions to be called 
 * safely. If there no one callback method has been passed it causes busy
 * flag will be decremented.      
 * @method ready
 * @for  ready()
 */
pkg.ready = function() {
    if (arguments.length === 0) {
        if ($busy &gt; 0) $busy--;
    }
    else {
        if (arguments.length == 1 &amp;&amp; $busy === 0 &amp;&amp; $f.length === 0) {
            arguments[0]();
            return;
        }
    }

    for(var i = 0; i &lt; arguments.length; i++) $f.push(arguments[i]);
    while($busy === 0 &amp;&amp; $f.length &gt; 0) {
        $f.shift()();
    }
};
/**
 * @for ready()
 */

pkg.busy = function() { $busy++; };

pkg.Output = Class([
    function $prototype() {
        this.print = function print(o) { this._p(0, o); };
        this.error = function error(o) { this._p(2, o); };
        this.warn  = function warn(o)  { this._p(1, o); };

        this._p = function(l, o) {
            o = this.format(o);
            if (pkg.isInBrowser) {
                if (pkg.isIE) {
                    console.log(o);
                    // !!!! should check if IE9+ is used we can use  console.log
                    // alert(o);
                }
                else {
                    if (l === 0) console.log(o);
                    else {
                        if (l == 1) console.warn(o);
                        else console.error(o);
                    }
                }
            }
            else pkg.$global.print(o);
        };

        this.format = function (o) {
            if (o &amp;&amp; o.stack) return [o.toString(), &quot;:&quot;,  o.stack.toString()].join(&quot;\n&quot;);
            if (o === null) return &quot;&lt;null&gt;&quot;;
            if (typeof o === &quot;undefined&quot;) return &quot;&lt;undefined&gt;&quot;;
            if (isString(o) || isNumber(o) || isBoolean(o)) return o;
            var d = [o.toString() + &quot; &quot; + (o.getClazz?o.getClazz().$name:&quot;&quot;) , &quot;{&quot;];
            for(var k in o) if (o.hasOwnProperty(k)) d.push(&quot;    &quot; + k + &quot; = &quot; + o[k]);
            return d.join(&#x27;\n&#x27;) + &quot;\n}&quot;;
        };
    }
]);

/**
 * Dummy class that implements nothing but can be useful to instantiate 
 * anonymous classes with some on &quot;the fly&quot; functionality:
 
        // instantiate and use zebra class with method a implemented 
        var ac = new zebra.Dummy([
             function a() {
                ...
             }
        ]);

        // use it
        ac.a();
 * 
 * @class Dummy
 */
pkg.Dummy = Class([]);

pkg.HtmlOutput = Class(pkg.Output, [
    function() { this.$this(null); },

    function(element) {
        element = element || &quot;zebra.out&quot;;
        if (pkg.isString(element)) {
            this.el = document.getElementById(element);
            if (this.el == null) {
                this.el = document.createElement(&#x27;div&#x27;);
                this.el.setAttribute(&quot;id&quot;, element);
                document.body.appendChild(this.el);
            }
        }
        else {
            if (element == null) throw new Error(&quot;Unknown HTML output element&quot;);
            this.el = element;
        }
    },

    function print(s) { this.out(&#x27;black&#x27;, s); },
    function error(s) { this.out(&#x27;red&#x27;, s); },
    function warn(s)  { this.out(&#x27;orange&#x27;, s); },

    function out(color, msg) {
        var t = [&quot;&lt;div class=&#x27;zebra.out.print&#x27; style=&#x27;color:&quot;, color, &quot;&#x27;&gt;&quot;, this.format(msg), &quot;&lt;/div&gt;&quot; ];
        this.el.innerHTML += t.join(&#x27;&#x27;);
    }
]);

pkg.isInBrowser = typeof navigator !== &quot;undefined&quot;;

pkg.isIE      = pkg.isInBrowser &amp;&amp; /msie/i.test(navigator.userAgent) &amp;&amp; !/opera/i.test(navigator.userAgent);
pkg.isOpera   = pkg.isInBrowser &amp;&amp; !/opera/i.test(navigator.userAgent);
pkg.isChrome  = pkg.isInBrowser &amp;&amp; typeof(window.chrome) !== &quot;undefined&quot;;
pkg.isSafari  = pkg.isInBrowser &amp;&amp; !pkg.isChrome &amp;&amp; /Safari/i.test(navigator.userAgent);
pkg.isFF      = pkg.isInBrowser &amp;&amp; window.mozInnerScreenX != null;
pkg.isMobile  = pkg.isInBrowser &amp;&amp; /Android|webOS|iPhone|iPad|iPod|BlackBerry|windows mobile|windows phone|IEMobile/i.test(navigator.userAgent);
pkg.isTouchable = pkg.isInBrowser &amp;&amp; ((pkg.isIE === false &amp;&amp; (!!(&#x27;ontouchstart&#x27; in window ) || !!(&#x27;onmsgesturechange&#x27; in window))) ||
                                      (!!window.navigator[&#x27;msPointerEnabled&#x27;] &amp;&amp; !!window.navigator[&quot;msMaxTouchPoints&quot;] &gt; 0)); // IE10   

pkg.out       = new pkg.Output();
pkg.isMacOS   = pkg.isInBrowser &amp;&amp; navigator.platform.toUpperCase().indexOf(&#x27;MAC&#x27;) !== -1;

pkg.print = function() { pkg.out.print.apply(pkg.out, arguments); };
pkg.error = function() { pkg.out.error.apply(pkg.out, arguments); };
pkg.warn  = function() { pkg.out.warn.apply(pkg.out, arguments); };

function complete() {
    //!!! this code resolve names of classes  defined in a package
    //    should be re-worked to use more generic and trust-able mechanism

    pkg(function(n, p) {
        function collect(pp, p) {
            for(var k in p) {
                if (k[0] != &quot;$&quot; &amp;&amp; p.hasOwnProperty(k) &amp;&amp; zebra.instanceOf(p[k], Class)) {
                    p[k].$name = pp ? [pp, k].join(&#x27;.&#x27;) : k;
                    collect(k, p[k]);
                }
            }
        }
        collect(null, p);
    });
    pkg.ready();
}

if (pkg.isInBrowser) {
    var m = window.location.search.match(/[?&amp;][a-zA-Z0-9_.]+=[^?&amp;=]+/g), env = {};
    for(var i=0; m &amp;&amp; i &lt; m.length; i++) {
        var l = m[i].split(&#x27;=&#x27;);
        env[l[0].substring(1)] = l[1];
    }
    pkg(env);

    //               protocol[1]        host[2]  path[3]  querystr[4]
    var purl = /^([a-zA-Z_0-9]+\:)\/\/([^\/]*)(\/[^?]*)(\?[^?\/]*)?/;

    /**
     * URL class
     * @param {String} url an url
     * @constructor
     * @class  URL
     */
    pkg.URL = function(url) {
        /**
         * URL path 
         * @attribute path
         * @readOnly
         * @type {String}
         */

        /**
         * Protocol
         * @attribute protocol
         * @readOnly
         * @type {String}
         */
        
        /**
         * Host
         * @attribute host
         * @readOnly
         * @type {String}
         */

        var a = document.createElement(&#x27;a&#x27;);
        a.href = url;
        var m = purl.exec(a.href);

        if (m == null) {
            m = purl.exec(window.location);
            if (m == null) {
                throw Error(&quot;Cannot resolve &#x27;&quot; + url + &quot;&#x27; url&quot;);
            }
            var p = m[3];
            a.href = m[1] + &quot;//&quot; + m[2] +  p.substring(0, p.lastIndexOf(&quot;/&quot;) + 1) + url;
            m = purl.exec(a.href);
        }

        /**
         * URL path
         * @attribute path
         * @type {String} 
         * @readOnly
         */
        this.path     = m[3];
        this.href     = a.href;

        /**
         * URL protocol
         * @attribute protocol
         * @type {String} 
         * @readOnly
         */
        this.protocol = m[1];

        /**
         * Host 
         * @attribute host
         * @type {String}
         * @readOnly
         */
        this.host = m[2];
        
        this.path = this.path.replace(/[\/]+/g, &quot;/&quot;);
        
        /**
         * Query string
         * @attribute qs
         * @type {String}
         * @readOnly
         */
        this.qs = m[4];
    };

    pkg.URL.prototype.toString = function() {
        return this.href;
    };

    /**
     * Get a parent URL of the URL
     * @return  {zebra.URL} a parent URL 
     * @method getParentURL
     */
    pkg.URL.prototype.getParentURL = function() {
        var i = this.path.lastIndexOf(&quot;/&quot;);
        if (i &lt; 0) return null;
        var p = this.path.substring(0, i+1);
        return new pkg.URL([this.protocol, &quot;//&quot;, this.host, p].join(&#x27;&#x27;));
    };

    pkg.URL.isAbsolute = function(u) {
        return /^[a-zA-Z]+\:\/\//i.test(u);
    };

    /**
     * Join the given relative path to the URL.
     * If the passed path starts from &quot;/&quot; character
     * it will be joined without taking in account 
     * the URL path
     * @param  {String} p a relative path
     * @return {String} an absolute URL
     * @method join
     */
    pkg.URL.prototype.join = function(p) {
        if (pkg.URL.isAbsolute(p)) throw new Error();
        return p[0] == &#x27;/&#x27; ? [ this.protocol, &quot;//&quot;, this.host, p ].join(&#x27;&#x27;)
                           : [ this.protocol, &quot;//&quot;, this.host, this.path, p ].join(&#x27;&#x27;);
    };

    if (window.addEventListener) {
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, complete, false);
    }
    else {
        window.attachEvent(&#x27;onload&#x27;, complete);
    }
}
else {
    complete();
}

})();



</pre>

</div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/js/tabs.js"></script>
</body>
</html>
